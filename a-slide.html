<link href="../polymer/polymer.html" rel="import">

<polymer-element name="a-slide">
  <template>
    <style>
      :host {
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        height: 100%;
        justify-content: center;
        opacity: 0;
        padding: 0 10%;
        position: absolute;
        transition: all .5s cubic-bezier(.4,0,.2,1);
        width: 100%;
      }

      :host([history=past]) {
        transform: translate3d(-100%, 0, 0);
      }
      :host([history=future]) {
        transform: translate3d(100%, 0, 0);
      }
      :host([history=present]) {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }

      ::content .fragment {
        opacity: 0;
        transition: all .333s ease;
      }

      ::content .fragment[visible] {
        opacity: 1;
      }

    </style>
    <content></content>
  </template>
  <script>

  Polymer('a-slide', {

    ready: function() {
      this.i = 0;
      this.fragments = [].slice.call(this.querySelectorAll('.fragment') || []);
    },

    get fragment() {
      return this.fragments[this.i];
    },

    forward: function() {
      if (this.i >= this.fragments.length) return false;

      this.fragment.setAttribute('visible', '');
      this.i++;
      return true;
    },

    back: function() {
      if (this.i === 0) return false;

      this.i--;
      this.fragment.removeAttribute('visible');
      return true;
    }

  });

  </script>
</polymer-element>
